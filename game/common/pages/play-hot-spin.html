<form id="form" class="form-horizontal">
    <div class="row">
        <div class="form-group">
            <div class="col-sm-4 col-sm-offset-4">
                <label for="user">Name:</label>
                <input id="user" type="text" class="form-control">
            </div>
        </div>
        <button id="play" class="btn btn-link" style="font-size: 200%; padding-top: 15px;"><span><i class="fa fa-gamepad fa-2x" aria-hidden="true"></i></span> PLAY</button>
    </div>
</form>
<!-- Back to menu button -->
<div class="row"><a id="btnBackMenu" class="btn btn-link" href="#"><span><i class="fa fa-angle-left fa-1x" aria-hidden="true"></i></span> Back to menu</a></div>
<script>
    $(function () {
        $('#play').click(function () {
            var players = [];

            function restoreLocalStorage() {
                players = [];
                for (var i = 0; i < localStorage.length; i++) {
                    var key = localStorage.key(i);
                    var y = JSON.parse(localStorage.getItem(key));
                    players.push(y);
                }
            }
            if (localStorage.length != 0) {
                restoreLocalStorage();
            }
            // Create object players with player info
            var player = {};
            if (players.length == 0) {
                player.name = $("#user").val();
                player.money = 100;
                player.probability = $("#sel1 option:selected").text();
                player.timestamp = new Date().getTime() / 1000;
                players.push(player);
            } else {
                for (var i = 0; i < players.length; i++) {
                    var tempName = $("#user").val();
                    var tempPlayer = players[i];
                    if (tempPlayer.name != tempName) {
                        player.name = $("#user").val();
                        player.money = 100;
                        player.probability = $("#sel1 option:selected").text();
                        player.timestamp = new Date().getTime() / 1000;
                        players.push(player);
                    } else {
                        tempPlayer.timestamp = new Date().getTime() / 1000;
                    }
                }
            }
            // Save on localstorage
            function saveLocalStorage() {
                // Check browser support
                if (typeof (Storage) !== "undefined") {
                    // Store
                    for (var i = 0; i < players.length; i++) {
                        localStorage.setItem(i.toString(), JSON.stringify(players[i]));
                    }
                } else {
                    console.log("Error", "Sorry, your browser does not support Web Storage...", "error");
                }
            }
            saveLocalStorage();
            
            window.location.replace('common/games/hot-spin/hot-spin.html');
        });
        $('#btnBackMenu').click(function () {
            location.reload();
        });
    });
</script>